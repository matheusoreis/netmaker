[gd_scene load_steps=7 format=3 uid="uid://c85knoernaa6i"]

[ext_resource type="Script" uid="uid://7h5yx1eul4ha" path="res://scenes/server/server.gd" id="1_fp0pw"]
[ext_resource type="PackedScene" uid="uid://6vj58m78umkk" path="res://core/database/repositories/account/account.tscn" id="2_hkcox"]
[ext_resource type="PackedScene" uid="uid://dq44xrenewuh4" path="res://core/database/repositories/map/map.tscn" id="3_kr8px"]
[ext_resource type="PackedScene" uid="uid://bgu85nqn6wj85" path="res://core/database/repositories/vocation/vocation.tscn" id="4_rqijc"]
[ext_resource type="PackedScene" uid="uid://b1x1yorbltxck" path="res://core/database/repositories/character/character.tscn" id="5_3e01g"]

[sub_resource type="GDScript" id="GDScript_hkcox"]
script/source = "extends CanvasLayer

@onready var account: AccountRepository = $\"../Repositories/Account\"

@onready var sign_up_identifier: LineEdit = $VBox/SignUp/Margin/VBox/Identifier
@onready var sign_up_password: LineEdit = $VBox/SignUp/Margin/VBox/Password

@onready var sign_in_identifier: LineEdit = $VBox/SignIn/Margin/VBox/Identifier
@onready var sign_in_password: LineEdit = $VBox/SignIn/Margin/VBox/Password


func _on_sign_up_pressed() -> void:
	var result: Dictionary = await account.sign_up(
		sign_up_identifier.text,
		sign_up_password.text,
		Constants.VERSION,
	)

	print(result)


func _on_sign_in_pressed() -> void:
	var result: Dictionary = await account.sign_in(
		sign_in_identifier.text,
		sign_in_password.text,
		Constants.VERSION,
	)

	print(result)
"

[node name="Server" type="Node2D"]
script = ExtResource("1_fp0pw")

[node name="Repositories" type="Node" parent="."]
unique_name_in_owner = true

[node name="Account" parent="Repositories" instance=ExtResource("2_hkcox")]

[node name="Map" parent="Repositories" instance=ExtResource("3_kr8px")]

[node name="Vocation" parent="Repositories" instance=ExtResource("4_rqijc")]

[node name="Character" parent="Repositories" instance=ExtResource("5_3e01g")]

[node name="Modules" type="Node" parent="."]
unique_name_in_owner = true

[node name="Test" type="CanvasLayer" parent="."]
script = SubResource("GDScript_hkcox")

[node name="VBox" type="VBoxContainer" parent="Test"]
offset_right = 40.0
offset_bottom = 40.0

[node name="SignUp" type="PanelContainer" parent="Test/VBox"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2

[node name="Margin" type="MarginContainer" parent="Test/VBox/SignUp"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBox" type="VBoxContainer" parent="Test/VBox/SignUp/Margin"]
layout_mode = 2

[node name="Identifier" type="LineEdit" parent="Test/VBox/SignUp/Margin/VBox"]
layout_mode = 2

[node name="Password" type="LineEdit" parent="Test/VBox/SignUp/Margin/VBox"]
layout_mode = 2
secret = true

[node name="SignUp" type="Button" parent="Test/VBox/SignUp/Margin/VBox"]
layout_mode = 2
text = "Cadastrar"

[node name="SignIn" type="PanelContainer" parent="Test/VBox"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2

[node name="Margin" type="MarginContainer" parent="Test/VBox/SignIn"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBox" type="VBoxContainer" parent="Test/VBox/SignIn/Margin"]
layout_mode = 2

[node name="Identifier" type="LineEdit" parent="Test/VBox/SignIn/Margin/VBox"]
layout_mode = 2

[node name="Password" type="LineEdit" parent="Test/VBox/SignIn/Margin/VBox"]
layout_mode = 2
secret = true

[node name="SignIn" type="Button" parent="Test/VBox/SignIn/Margin/VBox"]
layout_mode = 2
text = "Acessr"

[connection signal="pressed" from="Test/VBox/SignUp/Margin/VBox/SignUp" to="Test" method="_on_sign_up_pressed"]
[connection signal="pressed" from="Test/VBox/SignIn/Margin/VBox/SignIn" to="Test" method="_on_sign_in_pressed"]
